
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Welcome to gps2net’s documentation! &#8212; gps2net 1.1.2020 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">gps2net 1.1.2020 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-gps2net">
<span id="welcome-to-gps2net-s-documentation"></span><h1>Welcome to gps2net’s documentation!<a class="headerlink" href="#module-gps2net" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="gps2net.blockPrint">
<code class="sig-prename descclassname">gps2net.</code><code class="sig-name descname">blockPrint</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/gps2net.html#blockPrint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gps2net.blockPrint" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is used to disable print() messages.</p>
</dd></dl>

<dl class="function">
<dt id="gps2net.calculateClosestPointAndShortestPath">
<code class="sig-prename descclassname">gps2net.</code><code class="sig-name descname">calculateClosestPointAndShortestPath</code><span class="sig-paren">(</span><em class="sig-param">filepath</em>, <em class="sig-param">filepath_shp</em>, <em class="sig-param">minNumberOfLines=2</em>, <em class="sig-param">aStar=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gps2net.html#calculateClosestPointAndShortestPath"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gps2net.calculateClosestPointAndShortestPath" title="Permalink to this definition">¶</a></dt>
<dd><p>[summary]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>filepath</strong><span class="classifier">str</span></dt><dd><p>The path where the txt file (which contains the gps trajectories) is stored.</p>
</dd>
<dt><strong>filepath_shp</strong><span class="classifier">str</span></dt><dd><p>The path where the shp file (which contains the street data) is stored.</p>
</dd>
<dt><strong>minNumberOfLines</strong><span class="classifier">int, optional</span></dt><dd><p>[description], by default 2</p>
</dd>
<dt><strong>aStar</strong><span class="classifier">int, optional</span></dt><dd><p>[description], by default 1</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>calculatedSolution</strong><span class="classifier">list</span></dt><dd></dd>
<dt><strong>statistics</strong><span class="classifier">list</span></dt><dd><p>Statistics for the txt file (containing gps trajectories) for which the solution is calculated.
The statistics contain the following numbers (all of type int):</p>
<ul class="simple">
<li><p>outlier : Number of data points which where flagged as outliers.</p></li>
<li><p>taxi_did_not_move : Number of times when a data point’s gps position was identical to the gps position of the previous data point.</p></li>
<li><p>no_path_found : Number of times no path was found with the A Star algorithm.</p></li>
<li><p>cannot_compute_shortest_path_as_previous_point_is_0_0 :</p></li>
<li><p>path_from_target_to_source :</p></li>
<li><p>checked_other_solution_index :</p></li>
<li><p>chose_other_solution_index :</p></li>
<li><p>solution_already_lies_on_shortest_path :</p></li>
<li><p>no_solution_lies_on_shortest_path :</p></li>
<li><p>other_solution_is_worse :</p></li>
<li><p>other_solution_no_path_found :</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>outlier : Number of data points which where flagged as outliers.</p></li>
<li><p>taxi_did_not_move : x</p></li>
<li><p>no_path_found :</p></li>
<li><p>cannot_compute_shortest_path_as_previous_point_is_0_0 :</p></li>
<li><p>path_from_target_to_source :</p></li>
<li><p>checked_other_solution_index :</p></li>
<li><p>chose_other_solution_index :</p></li>
<li><p>solution_already_lies_on_shortest_path :</p></li>
<li><p>no_solution_lies_on_shortest_path :</p></li>
<li><p>other_solution_is_worse :</p></li>
<li><p>other_solution_no_path_found :</p></li>
</ul>
</dd></dl>

<dl class="function">
<dt id="gps2net.createGraphFromSHPInput">
<code class="sig-prename descclassname">gps2net.</code><code class="sig-name descname">createGraphFromSHPInput</code><span class="sig-paren">(</span><em class="sig-param">filepath_shp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gps2net.html#createGraphFromSHPInput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gps2net.createGraphFromSHPInput" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a directed graph from a shp file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>filepath_shp</strong><span class="classifier">str</span></dt><dd><p>The path where the shp file (which contains the street data) is stored.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>Directed Graph</dt><dd><p>The Directed Graph which contains all linesegments of the shapefiles as edges is returned.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This graph is only initialized once in the beginning of the script. The DiGraph contains all linesegment of the shp file as directed edges. The start and end node of each edge are tuples containing the coordinates of the position. The weight of an edge is the air_line_distance from the start to the end of the linesegment. Each edge containes the following attributes:</p>
<ul class="simple">
<li><dl class="simple">
<dt>id<span class="classifier">int</span></dt><dd><p>The id of the street (LineString) which the linesegment belongs to according to the shapefile.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>oneway<span class="classifier">{‘B’, ‘F’, ‘T’}</span></dt><dd><p>The ‘oneway’-property of the street (LineString) which the linesegment belongs to according to the shapefile. The ‘oneway’-property indicates if a street is bi-directional (B), or one way heading from the from-node to the to-node (F), or one way heading from the to-node to the from-node (T).</p>
</dd>
</dl>
</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="gps2net.cut">
<code class="sig-prename descclassname">gps2net.</code><code class="sig-name descname">cut</code><span class="sig-paren">(</span><em class="sig-param">line</em>, <em class="sig-param">distance</em>, <em class="sig-param">point</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gps2net.html#cut"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gps2net.cut" title="Permalink to this definition">¶</a></dt>
<dd><p>Cuts a line in two at a distance from its starting point.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>line</strong><span class="classifier">Shapely ‘LineString’ object</span></dt><dd><p>[description]</p>
</dd>
<dt><strong>distance</strong><span class="classifier">float</span></dt><dd><p>[description]</p>
</dd>
<dt><strong>point</strong><span class="classifier">Shapely Point object</span></dt><dd><p>[description]</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>list with LineStrings</dt><dd><p>Two LineStrings are returned. ‘point’ is the end point of the first LineString and the start point of the second LineString.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>…
‘line.interpolate(distance)’ should be equal to the parameter ‘point’. However, due to precision errors ‘point’ is used.
…</p>
</dd></dl>

<dl class="function">
<dt id="gps2net.distFrom">
<code class="sig-prename descclassname">gps2net.</code><code class="sig-name descname">distFrom</code><span class="sig-paren">(</span><em class="sig-param">lng1</em>, <em class="sig-param">lat1</em>, <em class="sig-param">lng2</em>, <em class="sig-param">lat2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gps2net.html#distFrom"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gps2net.distFrom" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the distance between two points in meters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>lng1</strong><span class="classifier">float</span></dt><dd><p>This float is the longitude of the source.</p>
</dd>
<dt><strong>lat1</strong><span class="classifier">float</span></dt><dd><p>This float is the latitude of the source.</p>
</dd>
<dt><strong>lng2</strong><span class="classifier">float</span></dt><dd><p>This float is the longitude of the target.</p>
</dd>
<dt><strong>lat2</strong><span class="classifier">float</span></dt><dd><p>This float is the latitude of the target.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>dist</strong><span class="classifier">int</span></dt><dd><p>The distance between two points in meters.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This function calculates the distance between two gps points.
The result is not 100% correct as the function does not consider the elipsis-like shape of the earth. Instead it just uses an earth radius of 6371000 meters for the calculation.</p>
<p>A more accurate calculation of the distance can be done in QGIS. For more details, please visit: <a class="reference external" href="http://www.qgistutorials.com/en/docs/calculating_line_lengths.html">http://www.qgistutorials.com/en/docs/calculating_line_lengths.html</a>
However, this function was used to be able to run the code independently of QGIS.</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="mi">12</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">12</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="mi">5</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myDist</span> <span class="o">=</span> <span class="n">distFrom</span><span class="p">(</span><span class="o">-</span><span class="mf">122.115</span><span class="p">,</span> <span class="mf">37.115</span><span class="p">,</span> <span class="o">-</span><span class="mf">122.111</span><span class="p">,</span> <span class="mf">37.111</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myDist</span>
<span class="go">568.8872918546489</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">distFrom</span><span class="p">(</span><span class="o">-</span><span class="mf">122.115</span><span class="p">,</span> <span class="mf">37.115</span><span class="p">,</span> <span class="o">-</span><span class="mf">122.111</span><span class="p">,</span> <span class="mf">37.111</span><span class="p">)</span> 
<span class="go">5</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="gps2net.enablePrint">
<code class="sig-prename descclassname">gps2net.</code><code class="sig-name descname">enablePrint</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/gps2net.html#enablePrint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gps2net.enablePrint" title="Permalink to this definition">¶</a></dt>
<dd><p>This method restores print() messages.</p>
</dd></dl>

<dl class="function">
<dt id="gps2net.getFilename">
<code class="sig-prename descclassname">gps2net.</code><code class="sig-name descname">getFilename</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gps2net.html#getFilename"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gps2net.getFilename" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name of a file from a specific path (excluding directories and extension).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>path</strong><span class="classifier">[string]</span></dt><dd><p>The path of a specific data file.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>string</dt><dd><p>The name of the file. Namely, the last part of the path (excluding the extgension).</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">myPath</span> <span class="o">=</span> <span class="s1">&#39;dir1/dir2/MyFilename.txt&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filename</span> <span class="o">=</span> <span class="n">getFilename</span><span class="p">(</span><span class="n">myPath</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filename</span>
<span class="go">&#39;MyFilename&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="gps2net.printProgressBar">
<code class="sig-prename descclassname">gps2net.</code><code class="sig-name descname">printProgressBar</code><span class="sig-paren">(</span><em class="sig-param">iteration</em>, <em class="sig-param">total</em>, <em class="sig-param">prefix=''</em>, <em class="sig-param">suffix=''</em>, <em class="sig-param">decimals=1</em>, <em class="sig-param">length=100</em>, <em class="sig-param">fill='█'</em>, <em class="sig-param">printEnd='r'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gps2net.html#printProgressBar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gps2net.printProgressBar" title="Permalink to this definition">¶</a></dt>
<dd><p>Call in a loop to create terminal progress bar.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>iteration</strong><span class="classifier">int</span></dt><dd><p>current iteration</p>
</dd>
<dt><strong>total</strong><span class="classifier">Int</span></dt><dd><p>total iterations</p>
</dd>
<dt><strong>prefix</strong><span class="classifier">str, optional</span></dt><dd><p>prefix string, by default ‘’</p>
</dd>
<dt><strong>suffix</strong><span class="classifier">str, optional</span></dt><dd><p>suffix string, by default ‘’</p>
</dd>
<dt><strong>decimals</strong><span class="classifier">int, optional</span></dt><dd><p>positive number of decimals in percent complete, by default 1</p>
</dd>
<dt><strong>length</strong><span class="classifier">int, optional</span></dt><dd><p>character length of bar, by default 100</p>
</dd>
<dt><strong>fill</strong><span class="classifier">str, optional</span></dt><dd><p>bar fill character, by default ‘█’</p>
</dd>
<dt><strong>printEnd</strong><span class="classifier">str, optional</span></dt><dd><p>end character (e.g. ‘\r’, ‘\r\n’), by default ‘\r’</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<div class="toctree-wrapper compound">
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Welcome to gps2net’s documentation!</a></li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">gps2net 1.1.2020 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Joachim Baumann.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.1.
    </div>
  </body>
</html>